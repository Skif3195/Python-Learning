# Тема 30 - Совместное использование функций map(), filter() и reduce()

<details>
  <summary>map() - применяет заданную функцию ко всем элементам входного итерируемого объекта и возвращает новый итератор.</summary> 
  
```
numbers = [1, 2, 3, 4, 5]
squared = map(lambda x: x**2, numbers)
print(list(squared))
```
</details> 
<details>
  <summary>filter() - фильтрует элементы входного итерируемого объекта, основываясь на результате переданной функции.</summary> 
  
```
numbers = [1, 2, 3, 4, 5]
even = filter(lambda x: x % 2 == 0, numbers)
print(list(even))
```
</details>
<details>
  <summary>reduce() - сводит итерируемый объект к единственному значению, используя указанную функцию.  </summary> 
  
```
from functools import reduce

numbers = [1, 2, 3, 4, 5]
product = reduce(lambda x, y: x * y, numbers)
print(product)
```
</details>

#

- Функции `[map()]`, `[filter()]` и `[reduce()]` возвращают итерируемый объект, значит эти функции можно передавать вторым аргументом как последовательность в другие функции.
- При передачи одной функции как аргумент другой функции, получившаяся конструкция работает с конца:

     - Сначала выполняется внутренняя функция.
     - Затем внешняя функция обрабатывает результат работы внутренней функции.
<details>
  <summary>Пример</summary> 
  
```
# Создадим список чисел
numbers = [0, -1, 2, -3, 4, -5, 6, -7, 8, -9]

# Функция удваивающая переданное в неё число
def double(n):
    return n * 2

# Функция возвращающее число, если оно положительное
def plus(n):
    return n > 0

# Функция map() удваивает значения элементов списка numbers.
# Функция filter() сортирует значения последовательности, которую вернула функция map(), и оставляет только положительные числа.
# Функция list() преобразует последовательность, которую возвращает функция filter(), в список
result = list(filter(plus, map(double, numbers)))

# Резльтат - список удвоенных, положительных чисел из списка numbers.
print(result)   # [4, 8, 12, 16]
```
</details>

#

# filter() в map()
```
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
def positive(num):
    return num >= 3

def double(num):
    return num + num

result = list(map(double, filter(positive, numbers)))

print(result)
```
   1) В первую очередь, срабатывает `[filter()]` - фильтрует элементы списка `[numbers]` при помощи функции `[positive()]`, оставляя только числа больше или равные 3.
   2) Затем `[map()]` работает с результатом работы `[filter()]` - удваивает каждое значение последовательности через функцию `[double()]`.
   3) Функция `[list()]` - создаёт из получившегося (в результате работы функций `[filter()]` и `[map()]`) итератора список.















# Тема 41 - pickle-файлы

`[Сериализация]` - процесс преобразования объекта в последовательность байтов или другой формат данных, который может быть сохранен или передан.   

- Сериализация часто используется для:

     - сохранения состояния программы (то есть некоторых её объектов) между запусками.
     - передачи данных между различными программами (например, по сети).

`[Десериализация]` - это обратный процесс, при котором из последовательности байтов восстанавливается объект.
#
`[Бинарный код]` - система числения, основанную на двух цифрах: 0 и 1. Каждая цифра в бинарном коде называется битом (от "binary digit"). Благодаря этой двоичной системе, компьютеры могут представлять информацию в виде электрических сигналов, которые либо присутствуют (1), либо отсутствуют (0).

`[Бит]` - это минимальная единица измерения информации в компьютерной науке и технологии. Бит может принимать одно из двух значений: 0 или 1. Каждый бит представляет собой единичную информационную единицу, которая используется для хранения или передачи информации в цифровых системах.

`[Байт]` - Байт - это основная единица измерения информации в компьютерах. Он представляет собой последовательность из 8 битов (бинарных цифр), которые могут принимать значения 0 или 1. Благодаря этому, байт может представлять 2^8 (256) различных комбинаций битовой последовательности.
#
<details>
  <summary>Модуль pickle</summary>

- `[import pickle]` - представляет собой набор инструментов для байтовой сериализации и десериализации объектов Python, обеспечивая возможность сохранять данные объектов в файлы или передавать их по сети в бинарном формате.

- `[Бинарная сериализация]` - это процесс преобразования объектов в последовательность байтов, которая может быть легко сохранена в файле или передана по сети. Этот процесс позволяет сохранить структуру объекта и его данные в бинарном формате.

- `[Бинарная десериализация]` - представляет собой обратный процесс, при котором последовательность байтов преобразуется обратно в объекты. Это позволяет восстановить сохраненные данные в их исходном виде и использовать их в программе.
#
- Модуль pickle может сериализовать:

     - все встроенные типы данных (bool, int, float, complex, str, None).
     - cписки, кортежи, словари и множества, содержащие любую комбинацию встроенных типов данных.
     - cписки, кортежи, словари и множества, содержащие любую комбинацию списков, кортежей, словарей и множеств.
     - функции, классы и экземпляры классов.
     - Модуль pickle может сериализовывать обычные функции (объявленные с помощью  def), но не может сериализовывать лямбда-функции (объявленные с помощью lambda).
     - Модуль pickle может сериализовывать функции из модуля operator.
 
     - Модуль pickle не может сериализовывать генераторы.



</details>

<details>
  <summary>Функции модуля pickle</summary>

- Модуль pickle поддерживает два основных режима доступа к файлу при использовании функций dump() и load():

     - Режим записи бинарных данных ('wb')
     - Режим чтения бинарных данных ('rb')
     

1. `[dump()]` - используется для сериализации объекта Python и сохранения его в открытый для записи бинарный файл.
```
import pickle

# Создаем объект для сериализации
data = {'name': 'John', 'age': 30, 'city': 'New York'}

# Открываем файл для записи бинарных данных
with open('data.pkl', 'wb') as f:
    # Сериализуем объект и записываем его в файл
    pickle.dump(data, f)
```
2. `[load()]` - принимает файловый объект, читает из него сериализованные данные, десериализует их в Python-объект и возвращает полученный Python-объект.
```
import pickle

# Открываем файл для чтения бинарных данных
with open('data.pkl', 'rb') as f:
    # Десериализуем объект из файла
    loaded_data = pickle.load(f)

print(loaded_data)
```
3. `[dumps()]` - используется для сериализации объекта Python в байтовую строку, вместо записи его в файл.
```
import pickle

# Создаем объект для сериализации
obj = {'Python': 1991, 'Java': 1995, 'C#': 2002}

# Сериализуем объект в байтовую строку
binary_obj = pickle.dumps(obj)

print(binary_obj)   # b'\x80\x03}q\x00(X\x06\x00\x00\x00Pythonq\x01M\xc7\x07X\x04\x00\x00\x00Javaq\x02M\xcb\x07X\x02\x00\x00\x00C#q\x03M\xd2\x07u.'
print(type(binary_obj))   # <class 'bytes'>


```
- Функция dumps() возвращает объект типа bytes.
- Тип данных bytes — это неизменяемые последовательности отдельных байтов. Синтаксис для байтовых литералов в основном такой же, как и для строковых литералов, за исключением того, что добавляется префикс b.

4. `[loads()]` - принимает объект типа bytes и десериализует его в объект Python.
```
import pickle
# Создаем объект для сериализации
obj = {'Python': 1991, 'Java': 1995, 'C#': 2002}

# Сериализуем объект в байтовую строку
binary_obj = pickle.dumps(obj)

print(binary_obj)   # b'\x80\x04\x95#\x00\x00\x00\x00\x00\x00\x00}\x94(\x8c\x06Python\x94M\xc7\x07\x8c\x04Java\x94M\xcb\x07\x8c\x02C#\x94M\xd2\x07u.'

# Десериализуем байтовую строку в объект Python.
new_obj = pickle.loads(binary_obj)

print(new_obj)   # {'Python': 1991, 'Java': 1995, 'C#': 2002}
```


</details>

<details>
  <summary>Отличия pickle от json</summary>

Сериализация и десериализация в модуле pickle и JSON имеют несколько ключевых различий:

1. Формат данных:

- Модуль pickle: сохраняет данные в бинарном формате, что делает его менее читаемым для человека, но более компактным и эффективным для хранения и передачи больших объемов данных.

- JSON (JavaScript Object Notation): сохраняет данные в текстовом формате, который читаем и понятен человеку, но требует больше места для хранения и передачи данных.

2. Типы данных:

- Модуль pickle: может сериализовать и десериализовать практически все типы данных Python, включая пользовательские классы и функции.

- JSON: может работать только с ограниченным набором данных, таких как строки, числа, списки, словари, логические значения и null. JSON не поддерживает сериализацию пользовательских классов и функций напрямую.

3. Безопасность:

- Модуль pickle: использование pickle может быть менее безопасным, особенно при загрузке данных из ненадежных источников, так как вредоносный код может быть выполнен при десериализации объекта. Однако он быстрее модуля json.

- JSON: JSON является безопасным для использования с данными из внешних источников, так как не предоставляет средств для выполнения вредоносного кода.

4. Поддержка других языков:

- JSON: является универсальным форматом данных, который поддерживается многими языками программирования, не только Python.

- Модуль pickle: специфичен для Python и не обеспечивает совместимость с другими языками.


</details>

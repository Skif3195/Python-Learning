# Тема 39 - CSV-файлы `[]`

- `[CSV]` - (Comma-Separated Values - значения, разделённые запятыми) — текстовый формат, представления табличных данных.Строка текста соответствует строке таблицы, которая содержит одно или несколько полей, а значения разделены запятыми (или другим разделителем, таким как точка с запятой или табуляция).

     - `[TSV]` - (Tab-Separated Values - значения, разделённые табуляцией) - текстовый формат, как и `[CSV]`, только разделитель - символ табуляции `[\t]`
     - `[DSV]` - (Delimited Separated Values - значения, разделённые разделителями) - обобщенный формат, где значения разделяются произвольным разделителем, который может быть запятой, табуляцией, точкой с запятой или другим символом.
#
<details>
  <summary>Пример</summary>
 
- Например, таблица:
```
Rank     Language     Share   
 1        Python      31.17%  
 2         Java       17.75%  
 3       JavaScrip      8%
 4          C#         7.05%  
 5         PHP         6.09%  
```
- в формате csv будет выглядеть так:
```
Rank,Language,Share
1,Python,31.17%
2,Java,17.75%
3,JavaScript,8%
4,C#,7.05%
5,PHP,6.09%
```
#
</details>

#


### Метод splitlines()

- `[splitlines()]` - Строковый метод (аналог split('\n')), построчно разделяет текст используя в качестве разделителя символ преноса строки `[\n]`.
```
# Чтение содержимого CSV файла
with open('file.csv', 'r') as file:
    csv_content = file.read()

# Разделение содержимого на строки
csv_lines = csv_content.splitlines()

# Теперь csv_lines содержит список строк из файла CSV
for line in csv_lines:
    # Обработка каждой строки
    print(line)
```
#
- Если в одном поле более одного слова - значения этого поля стоит заключать в кавычки:
```
keywords,price,product_name

"Садовый стул, стул для дачи",1699,ВЭДДО
"Складной стол, обеденный стол",7499,ЭПЛАРО
"Кружка, сосуд, стакан с ручкой",39,СТЕЛЬНА

Молочник,299,ВАРДАГЕН
Термос для еды,699,ЭФТЕРФРОГАД
Ситечко,59,ИДЕАЛИСК
```

#

# Модуль CSV

- `[CSV]` - модуль стандартной библиотеки Python. Предоставляет функционал для работы с файлами CSV, упрощая чтение, запись и обработку данных в этом формате. 

<details>
  <summary>Возможности модуля csv</summary>

1. Чтение данных из CSV файла: Модуль csv предоставляет методы для чтения данных из CSV файла, включая csv.reader() и csv.DictReader(). Первый метод возвращает список строк из файла, а второй - словарь для каждой строки, где ключами являются заголовки столбцов.

2. Запись данных в CSV файл: Модуль также позволяет записывать данные в CSV файлы с помощью метода csv.writer(), который позволяет записывать как список, так и словарь данных в файл.

3. Настройка разделителей и других параметров: Модуль позволяет настраивать различные параметры формата CSV, такие как символ разделителя, символ окончания строки и другие.

4. Обработка исключений: Модуль предоставляет обработку исключений для удобной работы с ошибками при чтении или записи файлов.
</details>

#

# Чтение данных
- `[csv.reader]` - объект, последовательно считывает строки из csv-файла, создавая объект итератор, в котором каждый элемент (каждая строка файла) - список.

     - Работает с файлом, открытым только в режиме `[r]`.
     - Создаёт итератор.
     - Каждую строку форматирует в список.
#
- `[csv.reader(file)]` - просто считывает файл построчно и создаёт из каждой строки список. При этом не делит строки на элементы на основе разделителя, поскольку не знает, какой разделитель использовать. Поэтому каждая строка будет представлена в виде одного элемента списка.
```
import csv

# Пример строки в файле CSV
# "Садовый стул, стул для дачи";1699;ВЭДДО

with open('file.csv', 'r') as file:
    csv_reader = csv.reader(file)
    for row in csv_reader:
        print(row)

# Получится список строк, в котором наша строка примет вид:
# ['Садовый стул, стул для дачи;1699;ВЭДДО']
```

Если нам нужно каждую строку файла привести к списку стандартного вида, т.е. используются определенные разделители и символы кавычек, мы можем использовать параметры delimiter и quotechar, чтобы указать модулю csv, как правильно разбить строки на элементы списка.

   - delimiter - Указывает какой разделитель используется в файле.
   - quotechar - указывает какой симфол используется в файле вместо кавычек (в случае, если в ячейке больше одного слова).
```

```







